<div x-data="instructionsData">
  <template x-if="loading">
    <creastina-loader></creastina-loader>
  </template>
  <template x-if="!loading">
    <div class="creastina-content">
      <div class="creastina-toolbar">
        <button class="creastina-button is--primary" @click="createInstruction">Neue Anleitung</button>
      </div>
      <div class="creastina-card__list">
        <template x-for="instruction in filteredInstructions" :key="instruction.id">
          <div class="creastina-card">
            <div class="creastina-card__header">
              <span x-text="instruction.name"></span>
              <div class="creastina-card__buttons">
                <button class="creastina-button is--icon is--primary" @click="showSteps(instruction)">
                  <svg viewBox="0 0 24 24">
                    <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2">
                      <path d="M11 6h10m-10 6h10m-10 6h10" />
                      <path
                        stroke-linejoin="round"
                        d="M3 7.393S4 8.045 4.5 9C4.5 9 6 5.25 8 4M3 18.393S4 19.045 4.5 20c0 0 1.5-3.75 3.5-5"
                      />
                    </g>
                  </svg>
                </button>
                <button class="creastina-button is--icon is--primary" @click="editInstruction(instruction)">
                  <svg viewBox="0 0 24 24">
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3.5 18.985V20.5h1.514c1.227 0 1.84 0 2.391-.228c.551-.229.985-.662 1.852-1.53l9.864-9.863c.883-.883 1.324-1.324 1.373-1.866q.012-.135 0-.269c-.05-.541-.49-.983-1.373-1.865c-.883-.883-1.324-1.324-1.865-1.373a1.5 1.5 0 0 0-.27 0c-.541.049-.982.49-1.865 1.373l-9.864 9.864c-.867.867-1.3 1.3-1.529 1.852c-.228.55-.228 1.164-.228 2.39M13.5 6.5l4 4"
                    />
                  </svg>
                </button>
                <button class="creastina-button is--icon is--negative" @click="deleteInstruction(instruction)">
                  <svg viewBox="0 0 24 24">
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-width="2"
                      d="m19.5 5.5l-.62 10.025c-.158 2.561-.237 3.842-.88 4.763a4 4 0 0 1-1.2 1.128c-.957.584-2.24.584-4.806.584c-2.57 0-3.855 0-4.814-.585a4 4 0 0 1-1.2-1.13c-.642-.922-.72-2.205-.874-4.77L4.5 5.5M9 11.735h6m-4.5 3.919h3M3 5.5h18m-4.945 0l-.682-1.408c-.454-.936-.68-1.403-1.071-1.695a2 2 0 0 0-.275-.172C13.594 2 13.074 2 12.034 2c-1.065 0-1.598 0-2.039.234a2 2 0 0 0-.278.18c-.396.303-.617.788-1.059 1.757L8.053 5.5"
                    />
                  </svg>
                </button>
              </div>
            </div>
            <div class="creastina-card__content">
              <span x-text="instruction.note" class="creastina-card__not-so-sidenote"></span>
              <div class="creastina-card__sidenote">
                <span style="font: var(--not-so-sidenote)" x-text="instruction.doneStepCount"></span>
                <span>von</span>
                <span style="font: var(--not-so-sidenote)" x-text="instruction.totalStepCount"></span>
                <span>Schritten erledigt</span>
              </div>
            </div>
          </div>
        </template>
        <template x-if="instructions.length === 0">
          <div class="creastina-message">
            <p>Du hast noch keine Anleitungen, erstell doch eine.</p>
          </div>
        </template>
        <template x-if="instructions.length !== 0 && filteredInstructions.length === 0">
          <div class="creastina-message">
            <p>Sieht so aus, dass es keine Anleitungen gibt, die zu der Suche passen</p>
          </div>
        </template>
      </div>
    </div>
  </template>
</div>
